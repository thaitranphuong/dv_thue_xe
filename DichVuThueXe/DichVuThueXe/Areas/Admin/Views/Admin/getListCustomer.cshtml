@model Tuple<PagedList.IPagedList<DichVuThueXe.Models.KhachHang>, string>
@using PagedList.Mvc;
@using DichVuThueXe.Models

@{
    ViewBag.Title = "getListCustomer";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<script>
    window.onload = function () {
        var searchParams = new URLSearchParams(window.location.search);
        var ten = searchParams.get("ten");
        if (ten !== null) {
            document.getElementById("timdichvu").value = ten;
        }
    }

    function showSearch() {
        var search = $('#timdichvu').val();
        $.ajax({
            url: '/Admin/Admin/getListCustomer',
            type: "GET",
            data: { ten: search },
            success: function (data) {
                document.getElementById("timdichvu").value = search;
                window.location.href = '/Admin/Admin/getListCustomer?ten=' + encodeURIComponent(search);
            }
        });
    }
</script>
<style>
    thead, th {
        background-color: lightblue;
    }

    .table, th, td {
        text-align: center;
    }
</style>
<br />
<div class="col-lg-12" style="padding-top:2%">
    <h1 class="page-header" style="color: lightblue;">DANH SÁCH KHÁCH HÀNG</h1>
</div>
<div class="search" style="padding-left: 50% ">
    <input id="timdichvu" class="search__input" type="text" placeholder="Tìm tên khách hàng">
    <button id="btn-timkiem" class="btn btn-bitbucket" onclick="showSearch()"><img src="~/Content/image/search.png" alt="search" width="15"></button>
</div>

<table class="table">
    <thead>
        <tr>
            <th style="color: white">
                Mã Khách Hàng
            </th>
            <th style="color: white">
                Tên Khách Hàng
            </th>
            <th style="color: white">
                CMND
            </th>
            <th style="color: white">
                Địa Chỉ
            </th>
            <th style="color: white">
                Điện Thoại
            </th>
            <th style="color: white">
                Email
            </th>
            <th style="color: white">
                Tài Khoản
            </th>
            <th style="color: white">
                Mật Khẩu
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Item1)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.MaKH)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TenKH)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CMND)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DiaChi)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SDT)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TaiKhoan)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.MatKhau)
                </td>
            </tr>
        }
    </tbody>
</table>
<div style="margin-left:20px;">
    @Html.PagedListPager(Model.Item1, page => Url.Action("getListCustomer", new { ten = Model.Item2, page }))
</div>